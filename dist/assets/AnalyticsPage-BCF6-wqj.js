import{c as Oe,r as l,j as n}from"./index-B0yzsfQe.js";import{H as Ee}from"./Header-Dk_vUsvW.js";import{u as Ie}from"./riskStore-DuP6q8tD.js";import{g as Le,A as De,D as Ce,R as Re}from"./RiskMap-kAQ75z-F.js";import{U as Te,T as _e,B as ze}from"./users-CXcLJNiN.js";import{x as z,I as G,Q as We,ag as Be,G as I,ah as Ke,ai as $e,aj as Ye,ak as Fe,al as Me,am as Ve,d as He,an as K,ao as Ge,ap as te,aq as Ue,e as U,h as ue,k as pe,l as he,ar as Xe,n as Ze,a6 as qe,m as ae,w as Je,D as Qe,y as X,R as et,S as tt,z as at,A as me,B as rt,C as nt,a8 as it,E as lt,a9 as st,Z as ot,L as ct,J as dt,H as fe,aa as re,a as ne,T as ut,U as pt,V as T,W as ht,X as mt,ac as ft,Y as xt,as as g,at as vt,au as gt,av as yt,f as bt,aw as jt,ax as wt,ay as Pt,az as St,aA as Nt,aB as At,a1 as kt,a2 as Ot,a3 as ie,a4 as Et}from"./CartesianChart-DP-AbI7X.js";import{f as It,a as Lt,S as Dt,g as Ct,h as F,i as Rt,P as Tt,e as _t,C as zt,d as Wt,X as Bt}from"./PieChart-b5AYpnCB.js";import{r as Kt}from"./index-CQqAP0sO.js";import"./leaflet-BfjmiK1n.js";const $t=[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]],Yt=Oe("map",$t);function B(){return B=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)({}).hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},B.apply(null,arguments)}function le(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),a.push.apply(a,r)}return a}function Ft(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?le(Object(a),!0).forEach(function(r){Mt(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):le(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function Mt(t,e,a){return(e=Vt(e))in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function Vt(t){var e=Ht(t,"string");return typeof e=="symbol"?e:e+""}function Ht(t,e){if(typeof t!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var w=32,Gt={align:"center",iconSize:14,inactiveColor:"#ccc",layout:"horizontal",verticalAlign:"middle"};function Ut(t){var{data:e,iconType:a,inactiveColor:r}=t,i=w/2,s=w/6,d=w/3,u=e.inactive?r:e.color,c=a??e.type;if(c==="none")return null;if(c==="plainline"){var h;return l.createElement("line",{strokeWidth:4,fill:"none",stroke:u,strokeDasharray:(h=e.payload)===null||h===void 0?void 0:h.strokeDasharray,x1:0,y1:i,x2:w,y2:i,className:"recharts-legend-icon"})}if(c==="line")return l.createElement("path",{strokeWidth:4,fill:"none",stroke:u,d:"M0,".concat(i,"h").concat(d,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(2*d,",").concat(i,`
            H`).concat(w,"M").concat(2*d,",").concat(i,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(d,",").concat(i),className:"recharts-legend-icon"});if(c==="rect")return l.createElement("path",{stroke:"none",fill:u,d:"M0,".concat(w/8,"h").concat(w,"v").concat(w*3/4,"h").concat(-w,"z"),className:"recharts-legend-icon"});if(l.isValidElement(e.legendIcon)){var p=Ft({},e);return delete p.legendIcon,l.cloneElement(e.legendIcon,p)}return l.createElement(It,{fill:u,cx:i,cy:i,size:w,sizeType:"diameter",type:c})}function Xt(t){var{payload:e,iconSize:a,layout:r,formatter:i,inactiveColor:s,iconType:d}=t,u={x:0,y:0,width:w,height:w},c={display:r==="horizontal"?"inline-block":"block",marginRight:10},h={display:"inline-block",verticalAlign:"middle",marginRight:4};return e.map((p,o)=>{var m=p.formatter||i,x=G({"recharts-legend-item":!0,["legend-item-".concat(o)]:!0,inactive:p.inactive});if(p.type==="none")return null;var f=p.inactive?s:p.color,v=m?m(p.value,p,o):p.value;return l.createElement("li",B({className:x,style:c,key:"legend-item-".concat(o)},We(t,p,o)),l.createElement(Be,{width:a,height:a,viewBox:u,style:h,"aria-label":"".concat(v," legend icon")},l.createElement(Ut,{data:p,iconType:d,inactiveColor:s})),l.createElement("span",{className:"recharts-legend-item-text",style:{color:f}},v))})}var Zt=t=>{var e=z(t,Gt),{payload:a,layout:r,align:i}=e;if(!a||!a.length)return null;var s={padding:0,margin:0,textAlign:r==="horizontal"?i:"left"};return l.createElement("ul",{className:"recharts-default-legend",style:s},l.createElement(Xt,B({},e,{payload:a})))};function qt(){return I(Ke)}var Jt=["contextPayload"];function M(){return M=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)({}).hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},M.apply(null,arguments)}function se(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),a.push.apply(a,r)}return a}function C(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?se(Object(a),!0).forEach(function(r){Qt(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):se(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function Qt(t,e,a){return(e=ea(e))in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function ea(t){var e=ta(t,"string");return typeof e=="symbol"?e:e+""}function ta(t,e){if(typeof t!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function aa(t,e){if(t==null)return{};var a,r,i=ra(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)a=s[r],e.indexOf(a)===-1&&{}.propertyIsEnumerable.call(t,a)&&(i[a]=t[a])}return i}function ra(t,e){if(t==null)return{};var a={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;a[r]=t[r]}return a}function na(t){return t.value}function ia(t){var{contextPayload:e}=t,a=aa(t,Jt),r=Ue(e,t.payloadUniqBy,na),i=C(C({},a),{},{payload:r});return l.isValidElement(t.content)?l.cloneElement(t.content,i):typeof t.content=="function"?l.createElement(t.content,i):l.createElement(Zt,i)}function la(t,e,a,r,i,s){var{layout:d,align:u,verticalAlign:c}=e,h,p;return(!t||(t.left===void 0||t.left===null)&&(t.right===void 0||t.right===null))&&(u==="center"&&d==="vertical"?h={left:((r||0)-s.width)/2}:h=u==="right"?{right:a&&a.right||0}:{left:a&&a.left||0}),(!t||(t.top===void 0||t.top===null)&&(t.bottom===void 0||t.bottom===null))&&(c==="middle"?p={top:((i||0)-s.height)/2}:p=c==="bottom"?{bottom:a&&a.bottom||0}:{top:a&&a.top||0}),C(C({},h),p)}function sa(t){var e=K();return l.useEffect(()=>{e(Ge(t))},[e,t]),null}function oa(t){var e=K();return l.useEffect(()=>(e(te(t)),()=>{e(te({width:0,height:0}))}),[e,t]),null}function ca(t,e,a,r){return t==="vertical"&&He(e)?{height:e}:t==="horizontal"?{width:a||r}:null}var da={align:"center",iconSize:14,itemSorter:"value",layout:"horizontal",verticalAlign:"bottom"};function xe(t){var e=z(t,da),a=qt(),r=$e(),i=Ye(),{width:s,height:d,wrapperStyle:u,portal:c}=e,[h,p]=Fe([a]),o=Me(),m=Ve();if(o==null||m==null)return null;var x=o-(i?.left||0)-(i?.right||0),f=ca(e.layout,d,s,x),v=c?u:C(C({position:"absolute",width:f?.width||s||"auto",height:f?.height||d||"auto"},la(u,e,i,o,m,h)),u),P=c??r;if(P==null||a==null)return null;var S=l.createElement("div",{className:"recharts-legend-wrapper",style:v,ref:p},l.createElement(sa,{layout:e.layout,align:e.align,verticalAlign:e.verticalAlign,itemSorter:e.itemSorter}),!c&&l.createElement(oa,{width:h.width,height:h.height}),l.createElement(ia,M({},e,f,{margin:i,chartWidth:o,chartHeight:m,contextPayload:a})));return Kt.createPortal(S,P)}xe.displayName="Legend";var ve=(t,e,a,r)=>pe(t,"xAxis",e,r),ge=(t,e,a,r)=>he(t,"xAxis",e,r),ye=(t,e,a,r)=>pe(t,"yAxis",a,r),be=(t,e,a,r)=>he(t,"yAxis",a,r),ua=U([ue,ve,ye,ge,be],(t,e,a,r,i)=>qe(t,"xAxis")?ae(e,r,!1):ae(a,i,!1)),pa=(t,e,a,r,i)=>i;function ha(t){return t.type==="line"}var ma=U([Ze,pa],(t,e)=>t.filter(ha).find(a=>a.id===e)),fa=U([ue,ve,ye,ge,be,ma,ua,Xe],(t,e,a,r,i,s,d,u)=>{var{chartData:c,dataStartIndex:h,dataEndIndex:p}=u;if(!(s==null||e==null||a==null||r==null||i==null||r.length===0||i.length===0||d==null||t!=="horizontal"&&t!=="vertical")){var{dataKey:o,data:m}=s,x;if(m!=null&&m.length>0?x=m:x=c?.slice(h,p+1),x!=null)return Ta({layout:t,xAxis:e,yAxis:a,xAxisTicks:r,yAxisTicks:i,dataKey:o,bandSize:d,displayedData:x})}}),xa=["id"],va=["type","layout","connectNulls","needClip","shape"],ga=["activeDot","animateNewValues","animationBegin","animationDuration","animationEasing","connectNulls","dot","hide","isAnimationActive","label","legendType","xAxisId","yAxisId","id"];function _(){return _=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)({}).hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},_.apply(null,arguments)}function oe(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),a.push.apply(a,r)}return a}function A(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?oe(Object(a),!0).forEach(function(r){ya(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):oe(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function ya(t,e,a){return(e=ba(e))in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function ba(t){var e=ja(t,"string");return typeof e=="symbol"?e:e+""}function ja(t,e){if(typeof t!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Z(t,e){if(t==null)return{};var a,r,i=wa(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)a=s[r],e.indexOf(a)===-1&&{}.propertyIsEnumerable.call(t,a)&&(i[a]=t[a])}return i}function wa(t,e){if(t==null)return{};var a={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;a[r]=t[r]}return a}var Pa=t=>{var{dataKey:e,name:a,stroke:r,legendType:i,hide:s}=t;return[{inactive:s,dataKey:e,type:i,color:r,value:me(a,e),payload:t}]},Sa=l.memo(t=>{var{dataKey:e,data:a,stroke:r,strokeWidth:i,fill:s,name:d,hide:u,unit:c,tooltipType:h,id:p}=t,o={dataDefinedOnItem:a,positions:void 0,settings:{stroke:r,strokeWidth:i,fill:s,dataKey:e,nameKey:void 0,name:me(d,e),hide:u,type:h,color:r,unit:c,graphicalItemId:p}};return l.createElement(rt,{tooltipEntrySettings:o})}),je=(t,e)=>"".concat(e,"px ").concat(t-e,"px");function Na(t,e){for(var a=t.length%2!==0?[...t,0]:t,r=[],i=0;i<e;++i)r=[...r,...a];return r}var Aa=(t,e,a)=>{var r=a.reduce((o,m)=>o+m);if(!r)return je(e,t);for(var i=Math.floor(t/r),s=t%r,d=e-t,u=[],c=0,h=0;c<a.length;h+=a[c],++c)if(h+a[c]>s){u=[...a.slice(0,c),s-h];break}var p=u.length%2===0?[0,d]:[d];return[...Na(a,i),...u,...p].map(o=>"".concat(o,"px")).join(", ")};function ka(t){var{clipPathId:e,points:a,props:r}=t,{dot:i,dataKey:s,needClip:d}=r,{id:u}=r,c=Z(r,xa),h=xt(c);return l.createElement(Ce,{points:a,dot:i,className:"recharts-line-dots",dotClassName:"recharts-line-dot",dataKey:s,baseProps:h,needClip:d,clipPathId:e})}function Oa(t){var{showLabels:e,children:a,points:r}=t,i=l.useMemo(()=>r?.map(s=>{var d,u,c={x:(d=s.x)!==null&&d!==void 0?d:0,y:(u=s.y)!==null&&u!==void 0?u:0,width:0,lowerWidth:0,upperWidth:0,height:0};return A(A({},c),{},{value:s.value,payload:s.payload,viewBox:c,parentViewBox:void 0,fill:void 0})}),[r]);return l.createElement(mt,{value:e?i:void 0},a)}function ce(t){var{clipPathId:e,pathRef:a,points:r,strokeDasharray:i,props:s}=t,{type:d,layout:u,connectNulls:c,needClip:h,shape:p}=s,o=Z(s,va),m=A(A({},ft(o)),{},{fill:"none",className:"recharts-line-curve",clipPath:h?"url(#clipPath-".concat(e,")"):void 0,points:r,type:d,layout:u,connectNulls:c,strokeDasharray:i??s.strokeDasharray});return l.createElement(l.Fragment,null,r?.length>1&&l.createElement(Dt,_({shapeType:"curve",option:p},m,{pathRef:a})),l.createElement(ka,{points:r,clipPathId:e,props:s}))}function Ea(t){try{return t&&t.getTotalLength&&t.getTotalLength()||0}catch{return 0}}function Ia(t){var{clipPathId:e,props:a,pathRef:r,previousPointsRef:i,longestAnimatedLengthRef:s}=t,{points:d,strokeDasharray:u,isAnimationActive:c,animationBegin:h,animationDuration:p,animationEasing:o,animateNewValues:m,width:x,height:f,onAnimationEnd:v,onAnimationStart:P}=a,S=i.current,b=ut(d,"recharts-line-"),j=l.useRef(b),[L,k]=l.useState(!1),y=!L,D=l.useCallback(()=>{typeof v=="function"&&v(),k(!1)},[v]),$=l.useCallback(()=>{typeof P=="function"&&P(),k(!0)},[P]),O=Ea(r.current),W=l.useRef(0);j.current!==b&&(W.current=s.current,j.current=b);var q=W.current;return l.createElement(Oa,{points:d,showLabels:y},a.children,l.createElement(pt,{animationId:b,begin:h,duration:p,isActive:c,easing:o,onAnimationEnd:D,onAnimationStart:$,key:b},E=>{var Se=T(q,O+q,E),Y=Math.min(Se,O),R;if(c)if(u){var Ne="".concat(u).split(/[,\s]+/gim).map(N=>parseFloat(N));R=Aa(Y,O,Ne)}else R=je(O,Y);else R=u==null?void 0:String(u);if(E>0&&O>0&&(i.current=d,s.current=Math.max(s.current,Y)),S){var Ae=S.length/d.length,J=E===1?d:d.map((N,ke)=>{var Q=Math.floor(ke*Ae);if(S[Q]){var ee=S[Q];return A(A({},N),{},{x:T(ee.x,N.x,E),y:T(ee.y,N.y,E)})}return m?A(A({},N),{},{x:T(x*2,N.x,E),y:T(f/2,N.y,E)}):A(A({},N),{},{x:N.x,y:N.y})});return i.current=J,l.createElement(ce,{props:a,points:J,clipPathId:e,pathRef:r,strokeDasharray:R})}return l.createElement(ce,{props:a,points:d,clipPathId:e,pathRef:r,strokeDasharray:R})}),l.createElement(ht,{label:a.label}))}function La(t){var{clipPathId:e,props:a}=t,r=l.useRef(null),i=l.useRef(0),s=l.useRef(null);return l.createElement(Ia,{props:a,clipPathId:e,previousPointsRef:r,longestAnimatedLengthRef:i,pathRef:s})}var Da=(t,e)=>{var a,r;return{x:(a=t.x)!==null&&a!==void 0?a:void 0,y:(r=t.y)!==null&&r!==void 0?r:void 0,value:t.value,errorVal:fe(t.payload,e)}};class Ca extends l.Component{render(){var{hide:e,dot:a,points:r,className:i,xAxisId:s,yAxisId:d,top:u,left:c,width:h,height:p,id:o,needClip:m,zIndex:x}=this.props;if(e)return null;var f=G("recharts-line",i),v=o,{r:P,strokeWidth:S}=Le(a),b=st(a),j=P*2+S,L=m?"url(#clipPath-".concat(b?"":"dots-").concat(v,")"):void 0;return l.createElement(ot,{zIndex:x},l.createElement(ct,{className:f},m&&l.createElement("defs",null,l.createElement(dt,{clipPathId:v,xAxisId:s,yAxisId:d}),!b&&l.createElement("clipPath",{id:"clipPath-dots-".concat(v)},l.createElement("rect",{x:c-j/2,y:u-j/2,width:h+j,height:p+j}))),l.createElement(Lt,{xAxisId:s,yAxisId:d,data:r,dataPointFormatter:Da,errorBarOffset:0},l.createElement(La,{props:this.props,clipPathId:v}))),l.createElement(De,{activeDot:this.props.activeDot,points:r,mainColor:this.props.stroke,itemDataKey:this.props.dataKey,clipPath:L}))}}var we={activeDot:!0,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!0,fill:"#fff",hide:!1,isAnimationActive:"auto",label:!1,legendType:"line",stroke:"#3182bd",strokeWidth:1,xAxisId:0,yAxisId:0,zIndex:Qe.line,type:"linear"};function Ra(t){var e=z(t,we),{activeDot:a,animateNewValues:r,animationBegin:i,animationDuration:s,animationEasing:d,connectNulls:u,dot:c,hide:h,isAnimationActive:p,label:o,legendType:m,xAxisId:x,yAxisId:f,id:v}=e,P=Z(e,ga),{needClip:S}=nt(x,f),b=it(),j=lt(),L=X(),k=I(W=>fa(W,x,f,L,v));if(j!=="horizontal"&&j!=="vertical"||k==null||b==null)return null;var{height:y,width:D,x:$,y:O}=b;return l.createElement(Ca,_({},P,{id:v,connectNulls:u,dot:c,activeDot:a,animateNewValues:r,animationBegin:i,animationDuration:s,animationEasing:d,isAnimationActive:p,hide:h,label:o,legendType:m,xAxisId:x,yAxisId:f,points:k,layout:j,height:y,width:D,left:$,top:O,needClip:S}))}function Ta(t){var{layout:e,xAxis:a,yAxis:r,xAxisTicks:i,yAxisTicks:s,dataKey:d,bandSize:u,displayedData:c}=t;return c.map((h,p)=>{var o=fe(h,d);if(e==="horizontal"){var m=re({axis:a,ticks:i,bandSize:u,entry:h,index:p}),x=ne(o)?null:r.scale(o);return{x:m,y:x,value:o,payload:h}}var f=ne(o)?null:a.scale(o),v=re({axis:r,ticks:s,bandSize:u,entry:h,index:p});return f==null||v==null?null:{x:f,y:v,value:o,payload:h}}).filter(Boolean)}function _a(t){var e=z(t,we),a=X();return l.createElement(et,{id:e.id,type:"line"},r=>l.createElement(l.Fragment,null,l.createElement(tt,{legendPayload:Pa(e)}),l.createElement(Sa,{dataKey:e.dataKey,data:e.data,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:e.fill,name:e.name,hide:e.hide,unit:e.unit,tooltipType:e.tooltipType,id:r}),l.createElement(at,{type:"line",id:r,data:e.data,xAxisId:e.xAxisId,yAxisId:e.yAxisId,zAxisId:0,dataKey:e.dataKey,hide:e.hide,isPanorama:a}),l.createElement(Ra,_({},e,{id:r}))))}var V=l.memo(_a,Je);V.displayName="Line";var za=["dangerouslySetInnerHTML","ticks","scale"],Wa=["id","scale"];function H(){return H=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)({}).hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},H.apply(null,arguments)}function de(t,e){if(t==null)return{};var a,r,i=Ba(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)a=s[r],e.indexOf(a)===-1&&{}.propertyIsEnumerable.call(t,a)&&(i[a]=t[a])}return i}function Ba(t,e){if(t==null)return{};var a={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;a[r]=t[r]}return a}function Ka(t){var e=K(),a=l.useRef(null);return l.useLayoutEffect(()=>{a.current===null?e(vt(t)):a.current!==t&&e(gt({prev:a.current,next:t})),a.current=t},[t,e]),l.useLayoutEffect(()=>()=>{a.current&&(e(yt(a.current)),a.current=null)},[e]),null}var $a=t=>{var{yAxisId:e,className:a,width:r,label:i}=t,s=l.useRef(null),d=l.useRef(null),u=I(bt),c=X(),h=K(),p="yAxis",o=I(y=>jt(y,e)),m=I(y=>wt(y,e)),x=I(y=>Pt(y,p,e,c)),f=I(y=>St(y,e));if(l.useLayoutEffect(()=>{if(!(r!=="auto"||!o||Nt(i)||l.isValidElement(i)||f==null)){var y=s.current;if(y){var D=y.getCalculatedWidth();Math.round(o.width)!==Math.round(D)&&h(At({id:e,width:D}))}}},[x,o,h,i,e,r,f]),o==null||m==null||f==null)return null;var{dangerouslySetInnerHTML:v,ticks:P,scale:S}=t,b=de(t,za),{id:j,scale:L}=f,k=de(f,Wa);return l.createElement(Rt,H({},b,k,{ref:s,labelRef:d,x:m.x,y:m.y,tickTextProps:r==="auto"?{width:void 0}:{width:r},width:o.width,height:o.height,className:G("recharts-".concat(p," ").concat(p),a),viewBox:u,ticks:x,axisType:p}))},Ya={allowDataOverflow:g.allowDataOverflow,allowDecimals:g.allowDecimals,allowDuplicatedCategory:g.allowDuplicatedCategory,angle:g.angle,axisLine:F.axisLine,hide:!1,includeHidden:g.includeHidden,interval:g.interval,minTickGap:g.minTickGap,mirror:g.mirror,orientation:g.orientation,padding:g.padding,reversed:g.reversed,scale:g.scale,tick:g.tick,tickCount:g.tickCount,tickLine:F.tickLine,tickSize:F.tickSize,type:g.type,width:g.width,yAxisId:0},Fa=t=>{var e=z(t,Ya);return l.createElement(l.Fragment,null,l.createElement(Ka,{interval:e.interval,id:e.yAxisId,scale:e.scale,type:e.type,domain:e.domain,allowDataOverflow:e.allowDataOverflow,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,padding:e.padding,includeHidden:e.includeHidden,reversed:e.reversed,ticks:e.ticks,width:e.width,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:e.angle,minTickGap:e.minTickGap,tick:e.tick,tickFormatter:e.tickFormatter}),l.createElement($a,e))},Pe=l.memo(Fa,Ct);Pe.displayName="YAxis";var Ma=["axis"],Va=l.forwardRef((t,e)=>l.createElement(kt,{chartName:"LineChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:Ma,tooltipPayloadSearcher:Ot,categoricalChartProps:t,ref:e}));const tr=()=>{const{selectedScenario:t,selectedYear:e,setScenario:a,setYear:r,dashboardData:i,populationData:s,initialize:d}=Ie();l.useEffect(()=>{d()},[d]);const u=[{name:"عشوائي (خطر)",value:65,color:"#2563eb"},{name:"رسمي",value:35,color:"#cbd5e1"}],c=[{year:"2030",ssp1:25e3,ssp5:6e4},{year:"2050",ssp1:4e4,ssp5:25e4},{year:"2070",ssp1:55e3,ssp5:8e5},{year:"2100",ssp1:7e4,ssp5:15e5}],h=s?.qisms.map((o,m)=>({rank:m+1,name:o.name,pop:o.exposedPopulation.toLocaleString(),risk:o.riskLevel==="شديد"?"high":o.riskLevel==="متوسط"?"med":"low",vy:o.riskLevel}))||[],p=["2030","2050","2070","2100"];return n.jsxs("div",{className:"min-h-screen bg-gray-50 font-sans",dir:"rtl",children:[n.jsx(Ee,{active:"analytics"}),n.jsxs("main",{className:"container mx-auto px-6 py-8",children:[n.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-8 gap-4 animate-slide-up",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"تحليل ضعف السكان"}),n.jsx("p",{className:"text-gray-500 text-sm",children:"تصور تأثيرات ارتفاع مستوى سطح البحر (SLR) على توزيع السكان تحت سيناريوهات IPCC SSP."})]}),n.jsxs("div",{className:"bg-white p-2 rounded-xl shadow-sm border border-gray-200 flex items-center gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-xs font-bold text-gray-500 block mb-1",children:"سيناريو SSP"}),n.jsxs("div",{className:"flex bg-gray-100 rounded-lg p-1",children:[n.jsx("button",{onClick:()=>a("SSP126"),className:`px-3 py-1 text-xs font-bold rounded-md transition-all ${t==="SSP126"?"bg-green-600 text-white shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:"SSP1-2.6"}),n.jsx("button",{onClick:()=>a("SSP245"),className:`px-3 py-1 text-xs font-bold rounded-md transition-all ${t==="SSP245"?"bg-yellow-500 text-white shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:"SSP2-4.5"}),n.jsx("button",{onClick:()=>a("SSP585"),className:`px-3 py-1 text-xs font-bold rounded-md transition-all ${t==="SSP585"?"bg-red-600 text-white shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:"SSP5-8.5"})]})]}),n.jsxs("div",{className:"flex-1 w-48 px-2",children:[n.jsxs("div",{className:"flex justify-between items-center mb-1",children:[n.jsx("label",{className:"text-xs font-bold text-gray-500",children:"عام التوقعات"}),n.jsx("span",{className:"text-blue-600 font-bold text-sm",children:e})]}),n.jsx("input",{type:"range",min:"0",max:"3",step:"1",value:p.indexOf(e),onChange:o=>r(p[parseInt(o.target.value)]),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-blue-600"})]})]})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-6 h-full animate-slide-up delay-100",children:[n.jsxs("div",{className:"lg:col-span-8 bg-white rounded-2xl shadow-sm border border-gray-200 overflow-hidden relative min-h-[500px]",children:[n.jsx("div",{className:"absolute inset-0 z-0",children:n.jsx(Re,{className:"h-full rounded-none border-0"})}),n.jsxs("div",{className:"absolute bottom-6 right-6 bg-white/95 backdrop-blur shadow-lg rounded-xl p-4 max-w-xs border border-gray-100",children:[n.jsxs("h3",{className:"font-bold text-sm text-gray-800 mb-2",children:["حالة الخطر الحالية (",e,")"]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex justify-between text-xs",children:[n.jsx("span",{className:"text-gray-500",children:"السيناريو"}),n.jsx("span",{className:"font-bold",children:t})]}),n.jsxs("div",{className:"flex justify-between text-xs",children:[n.jsx("span",{className:"text-gray-500",children:"المناطق المهددة"}),n.jsxs("span",{className:"font-bold text-red-600",children:[i?.highRiskAreas.length||0," مناطق"]})]})]}),n.jsx("div",{className:"mt-3",children:n.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500 mb-1",children:[n.jsx("span",{children:"منخفض"}),n.jsx("div",{className:"h-2 w-full rounded-full bg-gradient-to-r from-green-400 via-yellow-400 to-red-500"}),n.jsx("span",{children:"مرتفع"})]})})]}),n.jsxs("div",{className:"absolute top-6 left-6 flex flex-col gap-2",children:[n.jsx("button",{className:"w-8 h-8 bg-white rounded-lg shadow-md border border-gray-100 flex items-center justify-center hover:bg-gray-50 text-gray-600 transition-colors",children:"+"}),n.jsx("button",{className:"w-8 h-8 bg-white rounded-lg shadow-md border border-gray-100 flex items-center justify-center hover:bg-gray-50 text-gray-600 transition-colors",children:"-"}),n.jsx("button",{className:"w-8 h-8 bg-white rounded-lg shadow-md border border-gray-100 flex items-center justify-center hover:bg-gray-50 text-gray-600 transition-colors",children:n.jsx(Yt,{className:"w-4 h-4"})})]})]}),n.jsxs("div",{className:"lg:col-span-4 flex flex-col gap-6",children:[n.jsx("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-gray-200 relative overflow-hidden group hover:border-blue-500/30 transition-all",children:n.jsxs("div",{className:"flex justify-between items-start",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-gray-500 text-xs font-bold uppercase mb-1",children:"إجمالي السكان المعرضين للخطر"}),n.jsx("h3",{className:"text-4xl font-extrabold text-gray-900 mb-2",children:i?.populationAtRisk.toLocaleString()||"--"}),n.jsx("span",{className:"bg-red-50 text-red-600 text-xs font-bold px-2 py-1 rounded flex items-center w-fit gap-1",children:"متزايد سنوياً ↗"})]}),n.jsx("div",{className:"bg-blue-50 p-3 rounded-xl text-blue-600 group-hover:bg-blue-600 group-hover:text-white transition-colors",children:n.jsx(Te,{className:"w-6 h-6"})})]})}),n.jsx("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-gray-200 group hover:border-yellow-500/30 transition-all",children:n.jsxs("div",{className:"flex justify-between items-start",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-gray-500 text-xs font-bold uppercase mb-1",children:"المساحة المغمورة (كم²)"}),n.jsx("h3",{className:"text-4xl font-extrabold text-gray-900 mb-2",children:i?.floodedAreaKm2||"--"}),n.jsxs("span",{className:"bg-yellow-50 text-yellow-700 text-xs font-bold px-2 py-1 rounded flex items-center w-fit gap-1",children:[n.jsx(_e,{className:"w-3 h-3"}),"مؤشر خطير"]})]}),n.jsx("div",{className:"bg-yellow-50 p-3 rounded-xl text-yellow-600 group-hover:bg-yellow-500 group-hover:text-white transition-colors",children:n.jsx(ze,{className:"w-6 h-6"})})]})}),n.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-gray-200 flex-1 flex flex-col",children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsx("h3",{className:"font-bold text-gray-800",children:"ضعف الإسكان"}),n.jsx("button",{className:"text-gray-400 hover:text-gray-600",children:"•••"})]}),n.jsxs("div",{className:"flex-1 min-h-[180px] relative flex justify-center items-center",children:[n.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center pointer-events-none",children:[n.jsx("span",{className:"text-3xl font-extrabold text-gray-900",children:"65%"}),n.jsx("span",{className:"text-xs font-bold text-gray-500 uppercase",children:"عشوائي"})]}),n.jsx(ie,{width:"100%",height:"100%",children:n.jsx(Tt,{children:n.jsx(_t,{data:u,cx:"50%",cy:"50%",innerRadius:60,outerRadius:80,paddingAngle:5,dataKey:"value",children:u.map((o,m)=>n.jsx(zt,{fill:o.color},`cell-${m}`))})})})]})]})]}),n.jsxs("div",{className:"lg:col-span-12 grid grid-cols-1 lg:grid-cols-2 gap-6",children:[n.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-gray-200",children:[n.jsx("div",{className:"flex justify-between items-center mb-6",children:n.jsx("h3",{className:"font-bold text-gray-800",children:"التعرض حسب السيناريو (2030-2100)"})}),n.jsx("div",{className:"h-64",children:n.jsx(ie,{width:"100%",height:"100%",children:n.jsxs(Va,{data:c,children:[n.jsx(Wt,{strokeDasharray:"3 3",vertical:!1,stroke:"#e5e7eb"}),n.jsx(Bt,{dataKey:"year",axisLine:!1,tickLine:!1,tick:{fill:"#6b7280",fontSize:12}}),n.jsx(Pe,{axisLine:!1,tickLine:!1,tick:{fill:"#6b7280",fontSize:12}}),n.jsx(Et,{contentStyle:{borderRadius:"8px",border:"none",boxShadow:"0 4px 6px -1px rgb(0 0 0 / 0.1)"}}),n.jsx(xe,{}),n.jsx(V,{type:"monotone",dataKey:"ssp1",stroke:"#2563eb",strokeWidth:3,dot:{fill:"#2563eb",r:4},name:"SSP1-2.6"}),n.jsx(V,{type:"monotone",dataKey:"ssp5",stroke:"#ef4444",strokeWidth:3,dot:{fill:"#ef4444",r:4},name:"SSP5-8.5"})]})})})]}),n.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-gray-200",children:[n.jsxs("div",{className:"flex justify-between items-center mb-6",children:[n.jsx("h3",{className:"font-bold text-gray-800",children:"تصنيف الأحياء (تأثر الأقسام)"}),n.jsx("button",{className:"text-blue-600 text-xs font-bold hover:underline",children:"تصدير CSV"})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full text-right",children:[n.jsx("thead",{children:n.jsxs("tr",{className:"border-b border-gray-100",children:[n.jsx("th",{className:"pb-3 text-xs font-bold text-gray-500",children:"الترتيب"}),n.jsx("th",{className:"pb-3 text-xs font-bold text-gray-500",children:"اسم القسم"}),n.jsx("th",{className:"pb-3 text-xs font-bold text-gray-500",children:"السكان المتأثرين"}),n.jsx("th",{className:"pb-3 text-xs font-bold text-gray-500",children:"مؤشر الضعف"})]})}),n.jsx("tbody",{className:"text-sm",children:h.length>0?h.map(o=>n.jsxs("tr",{className:"border-b border-gray-50 hover:bg-gray-50 transition-colors",children:[n.jsx("td",{className:"py-3 font-bold text-gray-900",children:o.rank}),n.jsx("td",{className:"py-3 text-gray-700",children:o.name}),n.jsx("td",{className:"py-3 font-mono font-bold",children:o.pop}),n.jsx("td",{className:"py-3",children:n.jsxs("span",{className:`px-2 py-1 rounded text-xs font-bold ${o.risk==="high"?"bg-red-50 text-red-600":o.risk==="med"?"bg-orange-50 text-orange-600":"bg-green-50 text-green-600"}`,children:[o.risk==="high"?"عالي":o.risk==="med"?"متوسط":"منخفض"," ","(",o.vy,")"]})})]},o.rank)):n.jsx("tr",{children:n.jsx("td",{colSpan:4,className:"text-center py-4 text-gray-500",children:"جاري تحميل البيانات..."})})})]})})]})]})]})]})]})};export{tr as default};
